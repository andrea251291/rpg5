<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Mini Mappa Pok√©mon-style</title>
<style>
  body { margin:0; background:#000; display:flex; justify-content:center; align-items:center; height:100vh; }
  #game { border:1px solid #555; image-rendering:pixelated; }
  #message { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(0,0,0,0.8); color:#fff; padding:20px; font-size:24px; display:none; }
</style>
</head>
<body>
<canvas id="game" width="320" height="160"></canvas>
<div id="message">Livello superato</div>
<script>
const tileSize = 16;
const mapWidth = 20;
const mapHeight = 10;
// 0: pavimento, 1: muro, 2: uscita
const map = [
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1],
  [0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1],
  [0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1],
  [0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1],
  [0,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1],
  [0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1],
  [0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1],
  [0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,2],
  [0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1]
];
let player = {x:0, y:8};
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const message = document.getElementById('message');

function draw() {
  for(let y=0; y<mapHeight; y++) {
    for(let x=0; x<mapWidth; x++) {
      const tile = map[y][x];
      if(tile === 1) ctx.fillStyle = '#444';
      else if(tile === 2) ctx.fillStyle = '#0f0';
      else ctx.fillStyle = '#ccc';
      ctx.fillRect(x*tileSize, y*tileSize, tileSize, tileSize);
    }
  }
  ctx.fillStyle = '#ff0';
  ctx.fillRect(player.x*tileSize, player.y*tileSize, tileSize, tileSize);
}

draw();

document.addEventListener('keydown', e => {
  let nx = player.x;
  let ny = player.y;
  if(e.key === 'ArrowUp') ny--;
  if(e.key === 'ArrowDown') ny++;
  if(e.key === 'ArrowLeft') nx--;
  if(e.key === 'ArrowRight') nx++;
  if(nx < 0 || nx >= mapWidth || ny < 0 || ny >= mapHeight) return;
  if(map[ny][nx] === 1) return;
  player.x = nx; player.y = ny;
  if(map[ny][nx] === 2) {
    message.style.display = 'block';
  }
  draw();
});
</script>
</body>
</html>
